---
import { withBase } from '../utils/paths';
---
<header class="header">
  <div class="navbar">
    <a class="logo" href={withBase('/')}> 
      <span class="logo-dot"></span>
      <span>Pruning My Pothos</span>
    </a>
    <button class="nav-toggle" aria-expanded="false" aria-controls="primary-nav">
      <span class="nav-toggle-icon" aria-hidden="true"></span>
      <span class="nav-toggle-label">Menu</span>
    </button>
    <nav class="nav-links" id="primary-nav">
      <a href={withBase('/')}>Home</a>
      <a href={withBase('/essays')}>Essays</a>
      <a href={withBase('/categories')}>Categories</a>
      <a href={withBase('/about')}>About</a>
    </nav>
  </div>
</header>

<script>
  window.addEventListener('DOMContentLoaded', () => {
    const toggle = document.querySelector('.nav-toggle');
    const nav = document.getElementById('primary-nav');
    if (toggle && nav) {
      toggle.addEventListener('click', () => {
        const isOpen = toggle.getAttribute('aria-expanded') === 'true';
        toggle.setAttribute('aria-expanded', String(!isOpen));
        nav.classList.toggle('open', !isOpen);
      });
    }
  });
</script>
