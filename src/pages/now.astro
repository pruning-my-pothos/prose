---
import { getCollection } from "astro:content";
import Layout from "../layouts/Layout.astro";
import PageWrapper from "../components/layouts/PageWrapper.astro";
import { Icon } from "astro-icon/components";
import { siteConfig } from "../utils/siteConfig";
const base = import.meta.env.BASE_URL;

const nowEntries = (await getCollection("now", ({ data }) => data.draft !== true)).sort(
	(a, b) => new Date(b.data.startDate).getTime() - new Date(a.data.startDate).getTime(),
);
const recentNow = nowEntries.slice(0, 6);
---

<Layout title={`Now | ${siteConfig.title}`}>
	<PageWrapper>
		<header class="header">
				<div class="back-link" slot="header-right">
					<a href={`${base}garden`}>
						<Icon name="heroicons:arrow-left" size={16} />
						<span> Back to Path </span>
					</a>
				</div>
			<h1 class="page-title">Now</h1>
			<p class="tagline">
				A living note on where my attention currently rests.
			</p>
		</header>

		<section class="now-hero">
			<p class="lede">This is not louder. It is heavier.</p>
			<div class="two-column">
				<div>
					<h2>Present</h2>
					<p>
						I am moving through a quieter phase, but not a softer one. There is less output, more
						resistance. Fewer finished pieces. More time spent staying with things that do not resolve
						quickly. I read without extracting. I play without recording. I write knowing most of it will
						never leave the room.
					</p>
					<p class="accent">The work right now is internal. Letting ideas bruise before they become articulate. Letting silence do some of the shaping.</p>
					<p>This is not absence. It is compression.</p>
				</div>
				<div class="pulse">
					<h3>Work and thinking</h3>
					<p>
						My thinking sits in unstable territory. Between AI systems and the humans who have to live with
						their consequences. Between language as a tool and language as a weapon. Between documentation
						as control and documentation as care.
					</p>
					<p>
						I am paying attention to how systems train us quietly. What they reward. What they flatten. What
						they ask us to ignore.
					</p>
					<p>I am less interested in velocity and more interested in friction. The kind that forces honesty.</p>
					<p>Some of this turns into writing. Some into structures. Much of it stays unresolved. That is intentional.</p>
				</div>
			</div>
		</section>

		<section class="now-grid">
			<div class="block">
				<h3>Music</h3>
				<p>
					Music has become the place where thinking turns physical. Guitar is where language fails first.
					Repetition strips intention. Bad takes expose habits. Staying longer than is comfortable reveals what
					is actually there.
				</p>
				<p class="accent">I trust this process more than explanation. Anything that survives it eventually becomes <strong>PoeticMayhem</strong>.</p>
			</div>

			<div class="block">
				<h3>Reading and influence</h3>
				<p>
					I read slowly and unevenly. Mostly work that examines power, systems, cognition, and responsibility.
					Occasionally fiction, when I need to feel something without needing to solve it.
				</p>
				<p>I do not collect books. I collect residues. What lingers shows up on my Shelf as a trace, not an endorsement.</p>
			</div>

			<div class="block">
				<h3>What I am refusing right now</h3>
				<p>I am not publishing for relevance. I am not optimizing for reach. I am not pretending clarity I have not earned.</p>
				<p>There is value in waiting until something can withstand its own weight.</p>
			</div>

			<div class="block">
				<h3>Updates</h3>
				<p>This page changes only when something shifts internally. Not when something ships.</p>
			</div>
		</section>

		{recentNow.length > 0 && (
			<section class="recent">
				<h3>Recent shifts</h3>
				<ul>
					{recentNow.map((post) => (
						<li>
							<a href={`${base}now-${post.id}`}>
								<span class="date">
									{post.data.startDate.toLocaleDateString("en-US", {
										year: "numeric",
										month: "short",
										day: "numeric",
									})}
								</span>
								<span class="title">{post.data.title}</span>
							</a>
						</li>
					))}
				</ul>
			</section>
		)}
	</PageWrapper>
</Layout>

<style>
	.header {
		margin: var(--space-xl) auto;
		max-width: 800px;
	}

	.page-title {
		font-size: clamp(2.5rem, 4vw, 3.5rem);
		margin: 0 0 var(--space-3xs);
	}

	.tagline {
		font-size: var(--font-size-lg);
		color: var(--color-gray-600);
		margin: 0;
	}

	.now-hero {
		margin: var(--space-2xl) auto;
		padding: var(--space-xl);
		border-radius: var(--border-radius-lg);
		background: radial-gradient(circle at 20% 20%, rgba(66, 93, 118, 0.22), transparent 45%),
			linear-gradient(135deg, #0f172a 0%, #0b1222 60%, #090f1c 100%);
		color: #e8ecf2;
		box-shadow: 0 24px 60px rgba(7, 14, 30, 0.45);
	}

	.lede {
		text-transform: uppercase;
		letter-spacing: 0.14em;
		font-size: var(--font-size-xs);
		color: rgba(232, 236, 242, 0.72);
		margin-bottom: var(--space-m);
	}

	.now-hero h2,
	.now-hero h3 {
		color: #f4f6fb;
		margin-bottom: var(--space-xs);
	}

	.now-hero p {
		color: rgba(232, 236, 242, 0.9);
		line-height: 1.7;
	}

	.two-column {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
		gap: var(--space-l);
		align-items: start;
	}

	.pulse {
		border-left: 1px solid rgba(232, 236, 242, 0.2);
		padding-left: var(--space-l);
	}

	.accent {
		color: #9fb7ff;
		font-weight: 600;
	}

	.now-grid {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
		gap: var(--space-m);
		margin: var(--space-2xl) 0 var(--space-xl);
	}

	.block {
		border: 1px solid var(--color-gray-200);
		border-radius: var(--border-radius-lg);
		padding: var(--space-l);
		background: linear-gradient(180deg, #f9fafc 0%, #ffffff 100%);
		box-shadow: var(--box-shadow-xs);
	}

	.block h3 {
		margin: 0 0 var(--space-xs);
	}

	.block p {
		color: var(--color-gray-700);
		line-height: 1.65;
	}

	.recent {
		margin: var(--space-2xl) 0 var(--space-xl);
	}

	.recent h3 {
		margin-bottom: var(--space-s);
	}

	.recent ul {
		list-style: none;
		padding: 0;
		margin: 0;
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
		gap: var(--space-2xs);
	}

	.recent li {
		border: 1px solid var(--color-gray-200);
		border-radius: var(--border-radius-base);
		transition: transform 0.2s ease, box-shadow 0.2s ease;
		background: white;
	}

	.recent li:hover {
		transform: translateY(-2px);
		box-shadow: var(--box-shadow-sm);
	}

	.recent a {
		display: flex;
		justify-content: space-between;
		align-items: baseline;
		padding: var(--space-m);
		text-decoration: none;
		color: var(--color-gray-900);
		gap: var(--space-xs);
	}

	.recent .date {
		font-family: var(--font-sans);
		font-size: var(--font-size-xs);
		color: var(--color-gray-500);
		text-transform: uppercase;
		letter-spacing: 0.08em;
	}

	.recent .title {
		font-weight: 600;
		font-size: var(--font-size-sm);
		text-align: right;
	}

	@media (max-width: 768px) {
		.header {
			margin: var(--space-s) 0;
			max-width: 100%;
		}
		.now-hero {
			padding: var(--space-l);
		}
		.pulse {
			border-left: none;
			padding-left: 0;
			border-top: 1px solid rgba(232, 236, 242, 0.2);
			padding-top: var(--space-m);
		}
	}

	.back-link {
		display: inline-flex;
		align-items: center;
		height: 100%;
		margin-bottom: var(--space-s);
	}

	@media (max-width: 1440px) {
		.back-link {
			display: inline-flex;
			top: 0;
			margin: 0;
			left: 1rem;
		}
	}

	.back-link a {
		display: inline-flex;
		align-items: center;
		position: relative;
		font-family: var(--font-sans);
		font-size: var(--font-size-xs);
		text-transform: uppercase;
		letter-spacing: 0.05em;
		font-weight: bold;
		transition: all 0.8s cubic-bezier(0.2, 1, 0.8, 1);
		margin: 0;
		padding: 0;
	}

	.back-link svg {
		width: 0;
		transition: all 0.8s cubic-bezier(0.2, 1, 0.8, 1);
		color: var(--color-gray-300);
		position: relative;
		top: 1px;
	}

	.back-link span {
		display: inline-block;
		transition: transform 0.3s cubic-bezier(0.2, 1, 0.8, 1);
		color: var(--color-gray-600);
	}

	.back-link a:hover svg {
		width: 16px;
		margin-right: 2px;
		color: var(--color-sea-blue);
	}

	.back-link a:hover span {
		transform: translate3d(3px, 0, 0);
		color: var(--color-sea-blue);
	}
</style>
