---
import { getCollection } from "astro:content";
import { Icon } from "astro-icon/components";
import Layout from "../layouts/Layout.astro";
import Spacer from "../components/mdx/Spacer.astro";
import Title1 from "../components/mdx/typography/Title1.astro";
import SmallTitle2 from "../components/mdx/typography/SmallTitle2.astro";
import EssayCard from "../components/cards/EssayCard.astro";
import BookCard from "../components/cards/BookCard.astro";
import PatternCard from "../components/cards/PatternCard.astro";
import UnderlineHoverLink from "../components/mdx/UnderlineHoverLink.astro";
import GrowthIcon from "../components/layouts/GrowthIcon.astro";
import PageWrapper from "../components/layouts/PageWrapper.astro";
import { extractBaseSlug } from "../utils/versionUtils";
import { siteConfig } from "../utils/siteConfig";

const essays = await getCollection("essays", ({ data }) => data.featured === true && !data.draft);
const notes = await getCollection("notes", ({ data }) => !data.draft);
const patterns = await getCollection("patterns", ({ data }) => !data.draft);
const books = await getCollection("books");

const sortedEssays = essays
	.slice(0, 4)
	.sort((a, b) => new Date(b.data.updated).getTime() - new Date(a.data.updated).getTime());

const sortedNotes = notes.sort(
	(a, b) => new Date(b.data.updated).getTime() - new Date(a.data.updated).getTime(),
);

const sortedPatterns = patterns
	.slice(0, 8)
	.sort((a, b) => new Date(b.data.updated).getTime() - new Date(a.data.updated).getTime());
---

<Layout title={siteConfig.title} desc={siteConfig.description}>
	<PageWrapper>
		<header class="page-header">
			<Title1 class="main-title">
				Pruning My Pothos is a practice journal on pruning, adaptation, and quietly resilient growth.
			</Title1>
			<SmallTitle2>
				Letting go isn‚Äôt just a choice ‚Äî it‚Äôs part of growth. I write about AI integration and enablement,
				techno-functional translation, and the messy, nonlinear paths that get us to meaningful work.
			</SmallTitle2>
			<div class="focus-grid">
				{
					siteConfig.focusAreas.map((area) => (
						<div class="focus-card">
							<h4>{area.title}</h4>
							<ul>
								{area.items.map((item) => (
									<li>{item}</li>
								))}
							</ul>
						</div>
					))
				}
			</div>
		</header>

		<Spacer />

		<section class="pothos-section">
			<h3>Pruning My Pothos ‚Äî the plant, the practice, the philosophy, the path</h3>
			<p>
				Most people see a pothos and think: easy, decorative, low maintenance. I see a survivor that keeps
				growing in low light, spills from a forgotten pot, and quietly claims space. Pruning it surfaced a
				truth: letting go is part of growth, and beauty rarely moves in straight lines.
			</p>
			<ul>
				<li>‚úÇÔ∏è Prune to grow: subtract with purpose and make room to thrive.</li>
				<li>üå§ Low light living: you don‚Äôt need perfect conditions to make progress.</li>
				<li>üå± Trailing isn‚Äôt failing: growth can sprawl, meander, and still count.</li>
			</ul>
			<p class="quote">
				‚ÄúA pruned pothos doesn‚Äôt chase the sun; it finds peace with where it is. That‚Äôs strength.‚Äù ‚Äî PoeticMayhem
			</p>
			<p>
				This space is for people who are overwhelmed by noise and underwhelmed by meaning. If you‚Äôre tired of
				chasing someone else‚Äôs idea of growth, stay. Sprawl. Prune what no longer serves you and water what does.
			</p>
		</section>

		<section>
			<a href="/garden">
				<h2 class="garden-title">The Path</h2>
			</a>
			<div class="subheader">
				This path is a living set of notes, essays, and patterns that sprawl and get pruned over time.{" "}
				It orbits AI integration, techno-functional translation, and the quieter practice of growth.{" "}
				<a href="/garden-history" class="readmore-link">
					Learn more
					<Icon name="heroicons:arrow-right" size={18} />
				</a>
			</div>
		</section>

		<section class="garden-section">
			<section class="essays-section">
				<a href="/essays" class="header-link">
					<h3 class="section-header">
						Essays
						<Icon name="heroicons:arrow-right" size={18} />
					</h3>
				</a>
				<div class="subheader">Opinionated, longform narrative writing with an agenda</div>
				<div class="essays-grid">
					{
						sortedEssays.map((essay) => (
							<EssayCard
								id={essay.id}
								slug={extractBaseSlug(essay.id)}
								cover={essay.data.cover}
								title={essay.data.title}
								growthStage={essay.data.growthStage}
								date={essay.data.updated}
								description={essay.data.description}
							/>
						))
					}
				</div>
			</section>

			<section style="grid-area: notes;">
				<a href="/notes" class="header-link">
					<h3 class="section-header">
						Notes
						<Icon name="heroicons:arrow-right" size={18} />
					</h3>
				</a>
				<div class="subheader">
					Loose, unopinionated notes on things I don't entirely understand yet.
				</div>
				{
					sortedNotes.slice(0, 12).map((note) => (
						<a href={`/${note.id}`}>
							<div class="index-note-card">
								{note.data.growthStage && (
									<div class="icon">
										<GrowthIcon
											growthStage={note.data.growthStage as "seedling" | "budding" | "evergreen"}
										/>
									</div>
								)}
								<h3>{note.data.title}</h3>
							</div>
						</a>
					))
				}
			</section>

			<section class="patterns-section">
				<a href="/patterns" class="header-link">
					<h3 class="section-header">
						Patterns
						<Icon name="heroicons:arrow-right" size={18} />
					</h3>
				</a>
				<div class="subheader">Design patterns gathered from my own observations and research.</div>
				<div class="patterns-grid">
					{
						sortedPatterns.map((pattern) => (
							<PatternCard
								slug={pattern.id}
								title={pattern.data.title}
								growthStage={pattern.data.growthStage}
								date={pattern.data.updated}
								description={pattern.data.description}
							/>
						))
					}
				</div>
			</section>

			<section class="library-section">
				<a href="/library" class="header-link">
					<h3 class="section-header">
						Library
						<Icon name="heroicons:arrow-right" size={18} />
					</h3>
				</a>
				<div class="subheader">Books I've read and books I like the idea of having read.</div>
				<div class="books-grid">
					{
						books
							.slice(0, 8)
							.map((book) => (
								<BookCard
									small
									subtitle={book.data.subtitle}
									cover={book.data.cover}
									title={book.data.title}
									author={book.data.author}
									link={book.data.link}
								/>
							))
					}
				</div>
			</section>
		</section>
	</PageWrapper>
</Layout>

<style>
	.readmore-link {
		display: inline-flex;
		align-items: center;
		font-weight: 400;
		color: var(--color-crimson);
	}

	.readmore-link [data-icon] {
		transition: all 0.3s ease-in-out;
		position: relative;
		top: 2px;
		margin-left: var(--space-3xs);
	}

	.readmore-link:hover {
		color: var(--color-bright-crimson);
		cursor: pointer;
	}

	.readmore-link:hover [data-icon] {
		margin-left: var(--space-2xs);
		color: var(--color-sea-blue);
	}

	.index-note-card {
		display: flex;
		padding: var(--space-xs) 0 1.2rem;
		border-bottom: 1px solid var(--color-tinted-cream);
		transition: all 0.3s ease-in-out;
	}

	.index-note-card .icon {
		position: relative;
		top: 5px;
		flex-shrink: 0;
	}

	.index-note-card h3 {
		color: var(--color-gray-800);
		transition: all 0.3s ease-in-out;
		font-family: var(--font-body);
		font-size: var(--font-size-base);
		font-weight: 400;
		line-height: var(--leading-snug);
		margin-left: var(--space-xs);
		transition: all 0.3s ease-in-out;
	}

	.index-note-card:hover {
		border-bottom: 1px solid var(--color-sea-blue);
		transform: scale3d(1.02, 1.02, 1.02);
	}

	.index-note-card:hover h3 {
		color: var(--color-crimson);
	}

	.garden-title {
		font-size: var(--font-size-2xl);
		font-family: var(--font-serif);
		color: var(--color-gray-800);
		font-weight: 100;
		line-height: var(--leading-snug);
		margin: var(--space-xs) 0 var(--space-2xs);
		transition: all 0.3s ease-in-out;
	}

	.garden-section {
		margin: var(--space-xl) 0 var(--space-s);
		display: grid;
		grid-gap: var(--space-xl);
		grid-template-columns: 1fr 1fr 1fr;
		grid-template-rows: auto;
		grid-template-areas:
			"essays essays notes"
			"patterns library library";
	}

	@media (max-width: 768px) {
		.garden-section {
			grid-gap: var(--space-s);
		}
	}

	@media (max-width: 640px) {
		.garden-section {
			grid-template-columns: 1fr;
			grid-gap: var(--space-l);
			grid-template-rows: auto;
			grid-template-areas: "essays" "notes" "patterns" "library";
		}
	}

	.section-header {
		font-family: var(--font-sans);
		font-size: var(--font-size-base);
		font-weight: 600;
		color: var(--color-gray-800);
		display: flex;
		align-items: center;
		margin-bottom: var(--space-3xs);
	}

	.section-header [data-icon] {
		transition: all 0.3s ease-in-out;
		position: relative;
		top: 2px;
		margin-left: var(--space-3xs);
	}

	.header-link:hover .section-header {
		color: var(--color-bright-crimson);
	}

	.header-link:hover .section-header [data-icon] {
		margin-left: var(--space-2xs);
		color: var(--color-sea-blue);
	}

	.subheader {
		font-family: var(--font-sans);
		font-size: var(--font-size-base);
		font-weight: 300;
		color: var(--color-gray-800);
		margin-bottom: var(--space-m);
	}

	.page-header {
		display: flex;
		flex-direction: column;
		margin-top: var(--space-xl);
	}

	.focus-grid {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
		gap: var(--space-s);
		margin-top: var(--space-s);
	}

	.focus-card {
		border: 1px solid var(--color-tinted-cream);
		border-radius: 12px;
		padding: var(--space-s);
		background: var(--color-cream);
		box-shadow: 0 12px 24px rgba(0, 0, 0, 0.02);
	}

	.focus-card h4 {
		margin: 0 0 var(--space-3xs);
		font-family: var(--font-sans);
		font-size: var(--font-size-base);
		color: var(--color-gray-800);
		font-weight: 600;
	}

	.focus-card ul {
		list-style: none;
		padding: 0;
		margin: 0;
		display: grid;
		gap: var(--space-3xs);
	}

	.focus-card li {
		font-family: var(--font-sans);
		font-size: var(--font-size-sm);
		color: var(--color-gray-600);
	}

	.pothos-section {
		margin: var(--space-l) 0;
		border: 1px solid var(--color-tinted-cream);
		border-radius: 12px;
		padding: var(--space-m);
		background: var(--color-cream);
		box-shadow: 0 12px 24px rgba(0, 0, 0, 0.02);
	}

	.pothos-section h3 {
		margin: 0 0 var(--space-2xs);
		font-family: var(--font-serif);
		font-size: var(--font-size-xl);
		color: var(--color-gray-800);
	}

	.pothos-section p {
		font-family: var(--font-sans);
		color: var(--color-gray-800);
		font-size: var(--font-size-base);
		line-height: var(--leading-base);
	}

	.pothos-section ul {
		list-style: none;
		padding: 0;
		margin: var(--space-xs) 0;
		display: grid;
		gap: var(--space-3xs);
	}

	.pothos-section li {
		font-family: var(--font-sans);
		font-size: var(--font-size-base);
		color: var(--color-gray-800);
	}

	.quote {
		font-style: italic;
		color: var(--color-gray-600);
		margin-top: var(--space-xs);
	}

	.main-title {
		margin-top: var(--space-m);
		margin-bottom: 0;
		max-width: 1100px;
	}

	.company-name {
		margin: 0 0.6rem 0 0.3rem;
	}

	.essays-section {
		grid-area: essays;
	}

	.patterns-section {
		grid-area: patterns;
	}

	.patterns-grid {
		margin-left: -1.4rem;
	}

	.library-section {
		grid-area: library;
	}

	.essays-grid,
	.books-grid {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
		grid-gap: var(--space-2xs);
	}

	.books-grid {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
		grid-gap: var(--space-2xs);
		margin: 0;
	}
</style>
